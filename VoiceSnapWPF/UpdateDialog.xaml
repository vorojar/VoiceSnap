<Window x:Class="VoiceSnap.UpdateDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="发现新版本"
        Width="420" Height="380"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        Topmost="True">
    
    <Border Background="White" CornerRadius="12" Margin="20">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.15" Color="Black"/>
        </Border.Effect>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- 标题栏 -->
            <Grid Grid.Row="0" Margin="24,20,24,0">
                <TextBlock Text="VoiceSnap 语闪 · 发现新版本" FontSize="17" FontWeight="SemiBold" Foreground="#1C1C1E"/>
                <Button x:Name="CloseButton" Click="CloseButton_Click" 
                        HorizontalAlignment="Right" VerticalAlignment="Top"
                        Width="24" Height="24" Cursor="Hand"
                        Background="Transparent" BorderThickness="0">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" CornerRadius="12">
                                <TextBlock Text="✕" FontSize="12" Foreground="#8E8E93" 
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#F2F2F7"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </Grid>
            
            <!-- 内容区域 -->
            <StackPanel Grid.Row="1" Margin="24,16,24,0">
                <!-- 版本号 -->
                <TextBlock x:Name="VersionText" Text="v1.3.1" FontSize="28" FontWeight="Bold" Foreground="#007AFF" Margin="0,0,0,16"/>
                
                <!-- 更新说明 -->
                <ScrollViewer MaxHeight="160" VerticalScrollBarVisibility="Auto">
                    <ScrollViewer.Resources>
                        <Style TargetType="ScrollBar">
                            <Setter Property="Width" Value="6"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ScrollBar">
                                        <Grid Background="Transparent">
                                            <Track x:Name="PART_Track" IsDirectionReversed="True">
                                                <Track.Thumb>
                                                    <Thumb>
                                                        <Thumb.Template>
                                                            <ControlTemplate TargetType="Thumb">
                                                                <Border Background="#C8C8C8" CornerRadius="3" Margin="1"/>
                                                            </ControlTemplate>
                                                        </Thumb.Template>
                                                    </Thumb>
                                                </Track.Thumb>
                                            </Track>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ScrollViewer.Resources>
                    <TextBlock x:Name="ReleaseNotesText" 
                               Text="• 新增自动更新功能&#x0a;• 优化启动速度" 
                               FontSize="13" LineHeight="22" Foreground="#3C3C43" TextWrapping="Wrap"/>
                </ScrollViewer>
            </StackPanel>
            
            <!-- 按钮区域 -->
            <StackPanel x:Name="ButtonPanel" Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="24,16,24,20">
                <!-- 稍后提醒 -->
                <Button x:Name="LaterButton" Click="LaterButton_Click" Content="稍后提醒" 
                        Width="100" Height="36" Margin="0,0,12,0" Cursor="Hand">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="Bd" Background="White" BorderBrush="#D1D1D6" BorderThickness="1" CornerRadius="8">
                                <TextBlock Text="{TemplateBinding Content}" FontSize="13" FontWeight="Medium"
                                           Foreground="#1C1C1E" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Bd" Property="Background" Value="#F2F2F7"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                
                <!-- 立即更新 -->
                <Button x:Name="UpdateButton" Click="UpdateButton_Click" Content="立即更新" 
                        Width="100" Height="36" Cursor="Hand">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="Bd" Background="#1C1C1E" CornerRadius="8">
                                <TextBlock Text="{TemplateBinding Content}" FontSize="13" FontWeight="Medium"
                                           Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Bd" Property="Background" Value="#3C3C43"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
            
            <!-- 下载进度区域 (默认隐藏) -->
            <StackPanel x:Name="ProgressPanel" Grid.Row="2" Visibility="Collapsed" Margin="24,16,24,20">
                <TextBlock x:Name="ProgressText" Text="正在下载更新..." FontSize="13" Foreground="#3C3C43" Margin="0,0,0,8"/>
                <Grid x:Name="ProgressBarContainer" Height="8">
                    <Border Background="#F2F2F7" CornerRadius="4"/>
                    <Border x:Name="ProgressFill" Background="#007AFF" CornerRadius="4" HorizontalAlignment="Left" Width="0"/>
                </Grid>
                <TextBlock x:Name="ProgressPercent" Text="0%" FontSize="11" Foreground="#8E8E93" HorizontalAlignment="Right" Margin="0,4,0,0"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
